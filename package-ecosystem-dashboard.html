<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Source Package Ecosystem Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, #1e3a8a 0%, #5b21b6 50%, #991b1b 100%);
            padding: 2.5rem 1.5rem;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.25rem;
            color: #cbd5e1;
        }

        header .meta {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-top: 0.5rem;
        }

        nav {
            background: #1e293b;
            border-bottom: 1px solid #334155;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0.5rem 1.5rem;
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
        }

        .nav-btn {
            padding: 0.75rem 1.25rem;
            border: none;
            border-radius: 0.5rem;
            background: transparent;
            color: #94a3b8;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: #334155;
            color: #fff;
        }

        .nav-btn.active {
            background: #2563eb;
            color: #fff;
        }

        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-header {
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .section-header p {
            color: #94a3b8;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.25rem;
            transition: border-color 0.2s;
        }

        .stat-card:hover {
            border-color: #475569;
        }

        .stat-card .label {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-bottom: 0.25rem;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .stat-card .value.blue { color: #60a5fa; }
        .stat-card .value.red { color: #f87171; }
        .stat-card .value.green { color: #4ade80; }
        .stat-card .value.yellow { color: #facc15; }
        .stat-card .value.purple { color: #c084fc; }
        .stat-card .value.orange { color: #fb923c; }

        .stat-card .subtitle {
            font-size: 0.875rem;
            color: #64748b;
        }

        .stat-card .trend {
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .stat-card .trend.up { color: #f87171; }
        .stat-card .trend.down { color: #4ade80; }

        .chart-container {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-container h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .chart-wrapper {
            position: relative;
            height: 350px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 900px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .insight-box {
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .insight-box.blue {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.5), rgba(91, 33, 182, 0.5));
            border: 1px solid #3b82f6;
        }

        .insight-box.yellow {
            background: linear-gradient(135deg, rgba(113, 63, 18, 0.5), rgba(127, 29, 29, 0.5));
            border: 1px solid #ca8a04;
        }

        .insight-box.red {
            background: linear-gradient(135deg, rgba(127, 29, 29, 0.5), rgba(154, 52, 18, 0.5));
            border: 1px solid #dc2626;
        }

        .insight-box.purple {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.4), rgba(91, 33, 182, 0.4), rgba(127, 29, 29, 0.4));
            border: 1px solid #a855f7;
        }

        .insight-box h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-box p {
            color: #cbd5e1;
            line-height: 1.6;
        }

        .insight-box strong {
            color: #fff;
        }

        .insight-box strong.blue { color: #60a5fa; }
        .insight-box strong.red { color: #f87171; }
        .insight-box strong.yellow { color: #facc15; }
        .insight-box strong.green { color: #4ade80; }
        .insight-box strong.purple { color: #c084fc; }

        .list-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .list-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(51, 65, 85, 0.5);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .list-item:last-child {
            margin-bottom: 0;
        }

        .list-item .info h4 {
            font-weight: 500;
            color: #fff;
        }

        .list-item .info p {
            font-size: 0.875rem;
            color: #94a3b8;
        }

        .list-item .value {
            text-align: right;
        }

        .list-item .value .amount {
            color: #4ade80;
            font-weight: 600;
        }

        .list-item .value .type {
            font-size: 0.75rem;
            color: #64748b;
        }

        .timeline-item {
            display: flex;
            align-items: flex-start;
            padding: 0.75rem;
            background: rgba(51, 65, 85, 0.5);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .timeline-item .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-top: 6px;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }

        .timeline-item .dot.critical { background: #ef4444; }
        .timeline-item .dot.high { background: #f97316; }
        .timeline-item .dot.medium { background: #eab308; }

        .timeline-item .content {
            flex: 1;
        }

        .timeline-item .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timeline-item .header .name {
            font-weight: 500;
            color: #fff;
        }

        .timeline-item .header .year {
            font-size: 0.75rem;
            color: #64748b;
        }

        .timeline-item .desc {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        .progress-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .progress-item .label {
            width: 80px;
            color: #94a3b8;
            font-size: 0.875rem;
        }

        .progress-item .bar-container {
            flex: 1;
            margin: 0 0.75rem;
        }

        .progress-item .bar {
            height: 24px;
            background: #334155;
            border-radius: 9999px;
            overflow: hidden;
        }

        .progress-item .bar .fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 0.5rem;
        }

        .progress-item .bar .fill span {
            font-size: 0.75rem;
            font-weight: 500;
        }

        .progress-item .note {
            width: 120px;
            font-size: 0.75rem;
            color: #64748b;
        }

        .trends-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .trend-card {
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .trend-card.green {
            background: linear-gradient(180deg, rgba(20, 83, 45, 0.5), #1e293b);
            border: 1px solid #166534;
        }

        .trend-card.red {
            background: linear-gradient(180deg, rgba(127, 29, 29, 0.5), #1e293b);
            border: 1px solid #991b1b;
        }

        .trend-card.purple {
            background: linear-gradient(180deg, rgba(88, 28, 135, 0.5), #1e293b);
            border: 1px solid #6b21a8;
        }

        .trend-card .icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }

        .trend-card h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .trend-card h3.green { color: #4ade80; }
        .trend-card h3.red { color: #f87171; }
        .trend-card h3.purple { color: #c084fc; }

        .trend-card ul {
            list-style: none;
            margin-bottom: 1rem;
        }

        .trend-card ul li {
            font-size: 0.875rem;
            color: #cbd5e1;
            margin-bottom: 0.5rem;
        }

        .trend-card .conclusion {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .trend-card .conclusion.green { color: #4ade80; }
        .trend-card .conclusion.red { color: #f87171; }
        .trend-card .conclusion.purple { color: #c084fc; }

        .gap-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .gap-metric {
            text-align: center;
            padding: 1rem;
            background: rgba(51, 65, 85, 0.5);
            border-radius: 0.5rem;
        }

        .gap-metric .value {
            font-size: 2rem;
            font-weight: 700;
            color: #facc15;
        }

        .gap-metric .label {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 0.75rem 1rem;
            text-align: left;
        }

        table th {
            color: #94a3b8;
            font-weight: 500;
            border-bottom: 1px solid #334155;
        }

        table td {
            border-bottom: 1px solid rgba(51, 65, 85, 0.5);
        }

        table td.right {
            text-align: right;
        }

        table td.blue { color: #60a5fa; }
        table td.red { color: #f87171; font-weight: 600; }

        .cta-box {
            background: linear-gradient(135deg, #1e3a8a, #5b21b6, #991b1b);
            border-radius: 0.75rem;
            padding: 2rem;
            border: 1px solid #a855f7;
        }

        .cta-box h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .cta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .cta-grid p {
            color: #cbd5e1;
            line-height: 1.6;
        }

        .questions-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        .questions-box h4 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .questions-box ol {
            list-style: decimal;
            padding-left: 1.5rem;
        }

        .questions-box ol li {
            font-size: 0.875rem;
            color: #cbd5e1;
            margin-bottom: 0.5rem;
        }

        footer {
            background: #1e293b;
            border-top: 1px solid #334155;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-content p {
            font-size: 0.875rem;
            color: #94a3b8;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .legend-item .color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .data-table-scroll {
            overflow-x: auto;
        }

        .level-badge {
            display: inline-block;
            width: 32px;
            height: 32px;
            line-height: 32px;
            text-align: center;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .level-badge.level-0 {
            background: #334155;
            color: #94a3b8;
        }

        .level-badge.level-1 {
            background: rgba(245, 158, 11, 0.3);
            color: #F59E0B;
            border: 1px solid #F59E0B;
        }

        .level-badge.level-2 {
            background: rgba(59, 130, 246, 0.3);
            color: #60a5fa;
            border: 1px solid #3B82F6;
        }

        .level-badge.level-3 {
            background: rgba(16, 185, 129, 0.3);
            color: #10B981;
            border: 1px solid #10B981;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Open Source Package Ecosystem</h1>
            <p>Growth, Costs, and Security Challenges</p>
            <p class="meta">Data compiled January 2025 ‚Ä¢ PyPI, npm, Crates.io, RubyGems, Maven Central</p>
        </div>
    </header>

    <nav>
        <div class="nav-content">
            <button class="nav-btn active" onclick="showTab('growth')">üìà Ecosystem Growth</button>
            <button class="nav-btn" onclick="showTab('costs')">üí∞ Infrastructure Costs</button>
            <button class="nav-btn" onclick="showTab('security')">üîí Security & Malware</button>
            <button class="nav-btn" onclick="showTab('gap')">‚ö†Ô∏è The Gap Analysis</button>
            <button class="nav-btn" onclick="showTab('hidden')">üëª Hidden Gaps</button>
        </div>
    </nav>

    <main>
        <!-- Growth Tab -->
        <div id="growth" class="tab-content active">
            <div class="section-header">
                <h2>Explosive Ecosystem Growth</h2>
                <p>Package registries have grown exponentially, with npm now hosting 2M+ packages</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">PyPI Packages</div>
                    <div class="value blue">717K</div>
                    <div class="subtitle">Python</div>
                </div>
                <div class="stat-card">
                    <div class="label">npm Packages</div>
                    <div class="value red">2M+</div>
                    <div class="subtitle">JavaScript</div>
                </div>
                <div class="stat-card">
                    <div class="label">Crates</div>
                    <div class="value orange">210K</div>
                    <div class="subtitle">Rust</div>
                </div>
                <div class="stat-card">
                    <div class="label">RubyGems</div>
                    <div class="value red">190K</div>
                    <div class="subtitle">Ruby</div>
                </div>
                <div class="stat-card">
                    <div class="label">Maven Artifacts</div>
                    <div class="value purple">658K</div>
                    <div class="subtitle">Java/JVM</div>
                </div>
            </div>

            <div class="chart-container">
                <h3>Package Count Growth (2015-2025)</h3>
                <div class="legend">
                    <div class="legend-item"><div class="color" style="background: #CB3837"></div> npm</div>
                    <div class="legend-item"><div class="color" style="background: #3572A5"></div> PyPI</div>
                    <div class="legend-item"><div class="color" style="background: #C71A36"></div> Maven</div>
                    <div class="legend-item"><div class="color" style="background: #DEA584"></div> Crates</div>
                    <div class="legend-item"><div class="color" style="background: #CC342D"></div> RubyGems</div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="packageGrowthChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <div class="chart-container">
                    <h3>Monthly Downloads (Billions)</h3>
                    <div class="chart-wrapper">
                        <canvas id="downloadsChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Monthly Bandwidth (Petabytes)</h3>
                    <div class="chart-wrapper">
                        <canvas id="bandwidthChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="insight-box blue">
                <h3>üí° Key Insight</h3>
                <p>
                    PyPI alone serves <strong class="blue">747 petabytes annually</strong> at a sustained rate of 189 Gbps.
                    That's equivalent to streaming <strong>62 million hours of HD video per month</strong>. npm handles
                    <strong class="red">184 billion downloads monthly</strong> from its 2M+ packages.
                </p>
            </div>
        </div>

        <!-- Costs Tab -->
        <div id="costs" class="tab-content">
            <div class="section-header">
                <h2>The Infrastructure Reality</h2>
                <p>Running a package registry costs millions monthly‚Äîmost rely on donated infrastructure</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">PyPI CDN Value</div>
                    <div class="value blue">$1.8M+</div>
                    <div class="subtitle">Monthly (Fastly donation)</div>
                </div>
                <div class="stat-card">
                    <div class="label">RubyGems Total</div>
                    <div class="value red">$500K</div>
                    <div class="subtitle">Monthly operations</div>
                </div>
                <div class="stat-card">
                    <div class="label">Total Staff</div>
                    <div class="value purple">~25</div>
                    <div class="subtitle">Across all registries</div>
                </div>
                <div class="stat-card">
                    <div class="label">Requests/Staff</div>
                    <div class="value yellow">40B+</div>
                    <div class="subtitle">Per staff member monthly</div>
                </div>
            </div>

            <div class="chart-container">
                <h3>Monthly Cost Breakdown by Registry ($K)</h3>
                <div class="legend">
                    <div class="legend-item"><div class="color" style="background: #3B82F6"></div> CDN (Fastly donated)</div>
                    <div class="legend-item"><div class="color" style="background: #6366F1"></div> CDN (commercial)</div>
                    <div class="legend-item"><div class="color" style="background: #10B981"></div> Cloud Storage</div>
                    <div class="legend-item"><div class="color" style="background: #F59E0B"></div> Compute</div>
                    <div class="legend-item"><div class="color" style="background: #EF4444"></div> Staff</div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="costChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <div class="list-card">
                    <h3>Infrastructure Dependencies</h3>
                    <div class="list-item">
                        <div class="info">
                            <h4>Fastly</h4>
                            <p>PyPI, RubyGems, Crates.io, Rust</p>
                        </div>
                        <div class="value">
                            <div class="amount">$3M+/mo</div>
                            <div class="type">CDN</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>AWS</h4>
                            <p>PyPI, Crates.io</p>
                        </div>
                        <div class="value">
                            <div class="amount">$100K+/mo</div>
                            <div class="type">Compute</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>Google Cloud</h4>
                            <p>PyPI</p>
                        </div>
                        <div class="value">
                            <div class="amount">$10K/mo</div>
                            <div class="type">Storage</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>Microsoft/GitHub</h4>
                            <p>npm</p>
                        </div>
                        <div class="value">
                            <div class="amount">Absorbed</div>
                            <div class="type">Full Stack</div>
                        </div>
                    </div>
                </div>

                <div class="list-card">
                    <h3>Staff per Registry</h3>
                    <div class="progress-item">
                        <div class="label">PyPI</div>
                        <div class="bar-container">
                            <div class="bar">
                                <div class="fill" style="width: 50%"><span>5</span></div>
                            </div>
                        </div>
                        <div class="note">Fastly 100% in-kind</div>
                    </div>
                    <div class="progress-item">
                        <div class="label">RubyGems</div>
                        <div class="bar-container">
                            <div class="bar">
                                <div class="fill" style="width: 30%"><span>3</span></div>
                            </div>
                        </div>
                        <div class="note">$500K/month total</div>
                    </div>
                    <div class="progress-item">
                        <div class="label">Crates</div>
                        <div class="bar-container">
                            <div class="bar">
                                <div class="fill" style="width: 30%"><span>3</span></div>
                            </div>
                        </div>
                        <div class="note">AWS/Fastly donated</div>
                    </div>
                    <div class="progress-item">
                        <div class="label">npm</div>
                        <div class="bar-container">
                            <div class="bar">
                                <div class="fill" style="width: 100%"><span>10</span></div>
                            </div>
                        </div>
                        <div class="note">GitHub/Microsoft</div>
                    </div>
                    <div class="progress-item">
                        <div class="label">Maven</div>
                        <div class="bar-container">
                            <div class="bar">
                                <div class="fill" style="width: 50%"><span>5</span></div>
                            </div>
                        </div>
                        <div class="note">Sonatype managed</div>
                    </div>
                </div>
            </div>

            <!-- Foundation Budgets vs Operational Costs -->
            <div class="chart-container">
                <h3>Foundation Annual Budgets vs. Rising Operational Costs (2020-2024)</h3>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                    Foundation budgets grow modestly while infrastructure costs (shown as dashed lines) scale with traffic
                </p>
                <div class="legend">
                    <div class="legend-item"><div class="color" style="background: #3572A5"></div> PSF Revenue</div>
                    <div class="legend-item"><div class="color" style="background: #CC342D"></div> Ruby Central Revenue</div>
                    <div class="legend-item"><div class="color" style="background: #DEA584"></div> Rust Foundation Budget</div>
                    <div class="legend-item"><div class="color" style="background: #94a3b8; border: 2px dashed #fff"></div> Estimated Infra Costs (if paid)</div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="foundationBudgetChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <div class="chart-container">
                    <h3>The Funding Gap: Budget vs Donated Infrastructure</h3>
                    <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                        Foundation budgets (blue) vs. donated Fastly CDN credits (green) + other infra (yellow)
                    </p>
                    <div class="chart-wrapper" style="height: 280px;">
                        <canvas id="fundingGapChart"></canvas>
                    </div>
                </div>
                <div class="list-card">
                    <h3>Foundation Budget Breakdown (2023-2024)</h3>
                    <div class="list-item">
                        <div class="info">
                            <h4>Python Software Foundation</h4>
                            <p>Revenue: $4.4M | Expenses: $4.5M</p>
                        </div>
                        <div class="value">
                            <div class="amount" style="color: #3572A5;">2023</div>
                            <div class="type">PyCon: $1.8M, Grants: $677K</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>Ruby Central</h4>
                            <p>Revenue: $3.1M | Expenses: $2.9M</p>
                        </div>
                        <div class="value">
                            <div class="amount" style="color: #CC342D;">2024</div>
                            <div class="type">10x growth since 2020</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>Rust Foundation</h4>
                            <p>Budget: ~$1.9M | Grants: $400K+</p>
                        </div>
                        <div class="value">
                            <div class="amount" style="color: #DEA584;">2024</div>
                            <div class="type">5 Platinum members</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>OpenJS Foundation</h4>
                            <p>‚Ç¨875K grant from Sovereign Tech Fund</p>
                        </div>
                        <div class="value">
                            <div class="amount" style="color: #F59E0B;">2023</div>
                            <div class="type">npm ecosystem support</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="insight-box yellow">
                <h3>‚ö†Ô∏è The Sustainability Crisis</h3>
                <p>
                    Package registries serve <strong class="yellow">trillions of requests annually</strong> with
                    teams of just <strong>5-10 people</strong>. Without donations from Fastly, AWS, and Google Cloud worth
                    <strong class="red">$50M+ annually</strong>, the open source ecosystem would collapse.
                    Maven Central now implements <strong>rate limiting</strong> because 83% of bandwidth comes from just 1% of IPs.
                </p>
            </div>
        </div>

        <!-- Security Tab -->
        <div id="security" class="tab-content">
            <div class="section-header">
                <h2>The Security Arms Race</h2>
                <p>Malware growth outpaces security investment‚Äîregistries are playing catch-up</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">Malicious Packages</div>
                    <div class="value red">845K+</div>
                    <div class="subtitle">Detected since 2019</div>
                    <div class="trend up">‚Üë 156% YoY</div>
                </div>
                <div class="stat-card">
                    <div class="label">npm Malware Share</div>
                    <div class="value red">98.5%</div>
                    <div class="subtitle">Of all detected</div>
                </div>
                <div class="stat-card">
                    <div class="label">Median Removal</div>
                    <div class="value yellow">39h</div>
                    <div class="subtitle">Time to remove malware</div>
                </div>
                <div class="stat-card">
                    <div class="label">2FA Adoption</div>
                    <div class="value green">80%+</div>
                    <div class="subtitle">PyPI users (mandated)</div>
                </div>
            </div>

            <div class="chart-container">
                <h3>Cumulative Malicious Packages Detected</h3>
                <div class="chart-wrapper">
                    <canvas id="malwareChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <div class="chart-container">
                    <h3>Security Feature Adoption (%)</h3>
                    <div class="chart-wrapper">
                        <canvas id="securityRadarChart"></canvas>
                    </div>
                </div>

                <div class="list-card">
                    <h3>Major Supply Chain Incidents</h3>
                    <div style="max-height: 350px; overflow-y: auto;">
                        <div class="timeline-item">
                            <div class="dot critical"></div>
                            <div class="content">
                                <div class="header">
                                    <span class="name">SolarWinds</span>
                                    <span class="year">2020</span>
                                </div>
                                <div class="desc">18,000+ customers affected via Orion updates</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="dot critical"></div>
                            <div class="content">
                                <div class="header">
                                    <span class="name">Log4Shell</span>
                                    <span class="year">2021</span>
                                </div>
                                <div class="desc">CVSS 10.0, hundreds of millions of devices</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="dot high"></div>
                            <div class="content">
                                <div class="header">
                                    <span class="name">ua-parser-js</span>
                                    <span class="year">2022</span>
                                </div>
                                <div class="desc">Crypto miners in popular npm package</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="dot medium"></div>
                            <div class="content">
                                <div class="header">
                                    <span class="name">AI chatbot malware</span>
                                    <span class="year">2023</span>
                                </div>
                                <div class="desc">1,700+ downloads across 30+ countries</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="dot critical"></div>
                            <div class="content">
                                <div class="header">
                                    <span class="name">XZ Utils</span>
                                    <span class="year">2024</span>
                                </div>
                                <div class="desc">Backdoor in Linux compression utility</div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="dot high"></div>
                            <div class="content">
                                <div class="header">
                                    <span class="name">Shai-Hulud</span>
                                    <span class="year">2025</span>
                                </div>
                                <div class="desc">First npm worm, 500+ packages infected</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h3>Trusted Publishing Adoption (PyPI)</h3>
                <div class="chart-wrapper" style="height: 250px;">
                    <canvas id="trustedPublishingChart"></canvas>
                </div>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-top: 0.75rem;">
                    Trusted Publishing eliminates API tokens by using OIDC with CI/CD providers. Adoption grew from 10% to 45,000 projects in under a year.
                </p>
            </div>

            <div class="insight-box red">
                <h3>üö® The Security Reality</h3>
                <p>
                    Malicious packages increased <strong class="red">156% in 2024</strong> alone‚Äîthat's
                    <strong>1,400+ new malicious packages published daily</strong>. npm accounts for 98.5% of all detected malware.
                    Despite mandatory 2FA and Trusted Publishing, the median time to remove malware is still <strong class="yellow">39 hours</strong>.
                    The first self-replicating worm (Shai-Hulud) infected 500+ npm packages in 2025.
                </p>
            </div>

            <!-- OpenSSF Security Maturity Framework -->
            <div class="chart-container">
                <h3>OpenSSF Security Maturity Assessment</h3>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                    Based on <a href="https://repos.openssf.org/principles-for-package-repository-security" style="color: #60a5fa;">OpenSSF Principles for Package Repository Security</a> framework.
                    Tracks: Authentication, Authorization, General Capabilities, CLI Tooling. Levels 0-3 (higher = more mature).
                </p>
                <div class="legend" style="margin-bottom: 1.5rem;">
                    <div class="legend-item"><div class="color" style="background: #334155"></div> Level 0 (None)</div>
                    <div class="legend-item"><div class="color" style="background: #F59E0B"></div> Level 1 (Basic)</div>
                    <div class="legend-item"><div class="color" style="background: #3B82F6"></div> Level 2 (Moderate)</div>
                    <div class="legend-item"><div class="color" style="background: #10B981"></div> Level 3 (Advanced)</div>
                </div>
                <div class="data-table-scroll">
                    <table id="openssfTable">
                        <thead>
                            <tr>
                                <th>Registry</th>
                                <th style="text-align: center;">Authentication</th>
                                <th style="text-align: center;">Authorization</th>
                                <th style="text-align: center;">General Capabilities</th>
                                <th style="text-align: center;">CLI Tooling</th>
                                <th style="text-align: center;">Overall</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>PyPI</strong></td>
                                <td style="text-align: center;"><span class="level-badge level-3">3</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2" style="font-weight: bold;">2.3</span></td>
                            </tr>
                            <tr>
                                <td><strong>npm</strong></td>
                                <td style="text-align: center;"><span class="level-badge level-3">3</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2" style="font-weight: bold;">2.3</span></td>
                            </tr>
                            <tr>
                                <td><strong>RubyGems</strong></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-1">1</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2" style="font-weight: bold;">1.8</span></td>
                            </tr>
                            <tr>
                                <td><strong>Crates.io</strong></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2" style="font-weight: bold;">2.0</span></td>
                            </tr>
                            <tr>
                                <td><strong>Maven Central</strong></td>
                                <td style="text-align: center;"><span class="level-badge level-1">1</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2">2</span></td>
                                <td style="text-align: center;"><span class="level-badge level-3">3</span></td>
                                <td style="text-align: center;"><span class="level-badge level-2" style="font-weight: bold;">2.0</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="grid-2">
                <div class="chart-container">
                    <h3>Security Maturity by Track</h3>
                    <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                        How each registry scores on OpenSSF's four security tracks (0-3 scale)
                    </p>
                    <div class="chart-wrapper">
                        <canvas id="openssfBarChart"></canvas>
                    </div>
                </div>

                <div class="list-card">
                    <h3>What Each Level Requires</h3>
                    <div class="timeline-item" style="border-left: 3px solid #334155;">
                        <div class="content" style="padding-left: 0.75rem;">
                            <div class="header">
                                <span class="name">Level 0: None</span>
                            </div>
                            <div class="desc">No security requirements implemented</div>
                        </div>
                    </div>
                    <div class="timeline-item" style="border-left: 3px solid #F59E0B;">
                        <div class="content" style="padding-left: 0.75rem;">
                            <div class="header">
                                <span class="name">Level 1: Basic</span>
                            </div>
                            <div class="desc">MFA support, security reporting, basic account recovery</div>
                        </div>
                    </div>
                    <div class="timeline-item" style="border-left: 3px solid #3B82F6;">
                        <div class="content" style="padding-left: 0.75rem;">
                            <div class="header">
                                <span class="name">Level 2: Moderate</span>
                            </div>
                            <div class="desc">MFA for critical packages, vulnerability warnings, namespace protection</div>
                        </div>
                    </div>
                    <div class="timeline-item" style="border-left: 3px solid #10B981;">
                        <div class="content" style="padding-left: 0.75rem;">
                            <div class="header">
                                <span class="name">Level 3: Advanced</span>
                            </div>
                            <div class="desc">MFA required for all, build provenance, OIDC Trusted Publishing, SLSA attestations</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="insight-box purple">
                <h3>üìä OpenSSF Gap Analysis</h3>
                <p>
                    Most registries cluster around <strong class="purple">Level 2 (Moderate)</strong>, but none have achieved consistent Level 3 across all tracks.
                    <strong class="green">PyPI leads in Authentication</strong> (mandatory 2FA + Trusted Publishing), while
                    <strong class="blue">Maven excels in CLI Tooling</strong> (GPG signing requirement). The biggest gap across all registries is
                    <strong class="red">General Capabilities</strong>‚Äîparticularly real-time malware detection and build reproducibility verification.
                    Reaching Level 3 across all tracks would require the <strong class="yellow">unfunded security work</strong> detailed in the Hidden Gaps tab.
                </p>
            </div>
        </div>

        <!-- Gap Analysis Tab -->
        <div id="gap" class="tab-content">
            <div class="section-header">
                <h2>The Growing Gap</h2>
                <p>Resources aren't keeping pace with growth, attacks, or expectations</p>
            </div>

            <div class="trends-grid">
                <div class="trend-card green">
                    <div class="icon">üìà</div>
                    <h3 class="green">Ecosystem Growth</h3>
                    <ul>
                        <li>‚Ä¢ 47% CAGR in packages (15 years)</li>
                        <li>‚Ä¢ 2M+ npm, 717K+ PyPI packages</li>
                        <li>‚Ä¢ 747 PB/year bandwidth (PyPI alone)</li>
                        <li>‚Ä¢ 1.4 trillion Maven requests/year</li>
                    </ul>
                    <div class="conclusion green">‚Üë Exponential</div>
                </div>

                <div class="trend-card red">
                    <div class="icon">üí∞</div>
                    <h3 class="red">Infrastructure Investment</h3>
                    <ul>
                        <li>‚Ä¢ ~25 staff total across registries</li>
                        <li>‚Ä¢ 80%+ costs are donated</li>
                        <li>‚Ä¢ $6M/year RubyGems operations</li>
                        <li>‚Ä¢ Rate limiting being introduced</li>
                    </ul>
                    <div class="conclusion red">‚Üí Flat/Linear</div>
                </div>

                <div class="trend-card purple">
                    <div class="icon">üîí</div>
                    <h3 class="purple">Security Expectations</h3>
                    <ul>
                        <li>‚Ä¢ SBOM mandates (Executive Orders)</li>
                        <li>‚Ä¢ Real-time malware scanning</li>
                        <li>‚Ä¢ Trusted Publishing/Sigstore</li>
                        <li>‚Ä¢ 82% expect secure-by-design</li>
                    </ul>
                    <div class="conclusion purple">‚Üë Step Function</div>
                </div>
            </div>

            <div class="chart-container">
                <h3>The Gap in Numbers</h3>
                <div class="gap-metrics">
                    <div class="gap-metric">
                        <div class="value">156%</div>
                        <div class="label">YoY malware growth</div>
                    </div>
                    <div class="gap-metric">
                        <div class="value">85%</div>
                        <div class="label">5-10 staff for trillion+ requests</div>
                    </div>
                    <div class="gap-metric">
                        <div class="value">39h</div>
                        <div class="label">Median malware removal</div>
                    </div>
                    <div class="gap-metric">
                        <div class="value">20%</div>
                        <div class="label">Only 20% have full visibility</div>
                    </div>
                    <div class="gap-metric">
                        <div class="value">80%</div>
                        <div class="label">Deps remain un-upgraded</div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h3>10-Year Comparison</h3>
                <div class="data-table-scroll">
                    <table>
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th class="right">2015</th>
                                <th class="right">2025</th>
                                <th class="right">Change</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Total Packages (all registries)</td>
                                <td class="right">~400K</td>
                                <td class="right blue">~4M</td>
                                <td class="right red">+900%</td>
                            </tr>
                            <tr>
                                <td>Monthly Downloads (PyPI)</td>
                                <td class="right">~500M</td>
                                <td class="right blue">83.6B</td>
                                <td class="right red">+16,620%</td>
                            </tr>
                            <tr>
                                <td>Monthly Bandwidth (PyPI)</td>
                                <td class="right">~5 PB</td>
                                <td class="right blue">62 PB</td>
                                <td class="right red">+1,140%</td>
                            </tr>
                            <tr>
                                <td>Registry Staff (all)</td>
                                <td class="right">~10</td>
                                <td class="right blue">~25</td>
                                <td class="right red">+150%</td>
                            </tr>
                            <tr>
                                <td>Malicious Packages/Year</td>
                                <td class="right">~100</td>
                                <td class="right blue">~300K</td>
                                <td class="right red">+299,900%</td>
                            </tr>
                            <tr>
                                <td>Security Features Required</td>
                                <td class="right">1 (email)</td>
                                <td class="right blue">6+ (2FA, SBOM, etc)</td>
                                <td class="right red">+500%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="cta-box">
                <h3>The Bottom Line</h3>
                <div class="cta-grid">
                    <div>
                        <p>
                            Package registries are critical infrastructure serving <strong style="color: #fff;">trillions of requests</strong> with
                            teams smaller than a typical startup. Growth has been <strong style="color: #4ade80;">10-100x</strong> while
                            staffing increased only <strong style="color: #f87171;">2.5x</strong>.
                        </p>
                        <p style="margin-top: 1rem;">
                            Meanwhile, security expectations have shifted from "nice to have" to <strong style="color: #c084fc;">government mandates</strong>.
                            Without significant investment, we're building trillion-dollar businesses on infrastructure held together by
                            <strong style="color: #facc15;">donations and goodwill</strong>.
                        </p>
                    </div>
                    <div class="questions-box">
                        <h4>Key Questions for the Community</h4>
                        <ol>
                            <li>How do we sustainably fund registry infrastructure?</li>
                            <li>Should security be opt-in or mandatory?</li>
                            <li>Who bears the cost of compliance (SBOM, attestation)?</li>
                            <li>Can we achieve sub-1-hour malware removal?</li>
                            <li>What happens when donations end?</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hidden Gaps Tab -->
        <div id="hidden" class="tab-content">
            <div class="section-header">
                <h2>The Hidden Gaps</h2>
                <p>What doesn't show up in the numbers: volunteer labor, grant-dependent security, and unfunded work</p>
            </div>

            <!-- Key Hidden Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">Unpaid Maintainers</div>
                    <div class="value red">60%</div>
                    <div class="subtitle">Receive zero compensation</div>
                </div>
                <div class="stat-card">
                    <div class="label">Economic Value</div>
                    <div class="value green">$8.8T</div>
                    <div class="subtitle">Demand-side (Harvard)</div>
                </div>
                <div class="stat-card">
                    <div class="label">Security Funding</div>
                    <div class="value yellow">~$4M</div>
                    <div class="subtitle">Alpha-Omega grants (not recurring)</div>
                </div>
                <div class="stat-card">
                    <div class="label">Burnout Rate</div>
                    <div class="value red">60%</div>
                    <div class="subtitle">Have quit or considered it</div>
                </div>
            </div>

            <!-- Security Funding Source -->
            <div class="chart-container">
                <h3>Who Actually Funds Registry Security Work?</h3>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                    Almost all security work in non-profit registries is funded by Alpha-Omega and Sovereign Tech Fund grants‚Äînot foundation operating budgets. These are time-limited grants, not recurring revenue.
                </p>
                <div class="chart-wrapper">
                    <canvas id="securityFundingChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <div class="list-card">
                    <h3>Alpha-Omega Security Grants (2023-2025)</h3>
                    <p style="font-size: 0.875rem; color: #f87171; margin-bottom: 1rem;">‚ö†Ô∏è Time-limited grants, not guaranteed to renew</p>
                    <div class="list-item">
                        <div class="info">
                            <h4>PyPI / PSF</h4>
                            <p>Security Developer in Residence (Seth Larson)</p>
                        </div>
                        <div class="value">
                            <div class="amount">$1.3M+</div>
                            <div class="type">Sigstore, SBOMs, audits</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>Ruby Central</h4>
                            <p>Security Engineer in Residence</p>
                        </div>
                        <div class="value">
                            <div class="amount">$950K</div>
                            <div class="type">Trusted Publishing, signing</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>Rust Foundation</h4>
                            <p>crates.io security initiatives</p>
                        </div>
                        <div class="value">
                            <div class="amount">$911K</div>
                            <div class="type">Malware scanning, provenance</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>OpenJS Foundation</h4>
                            <p>JavaScript ecosystem security</p>
                        </div>
                        <div class="value">
                            <div class="amount">$580K</div>
                            <div class="type">Node.js hardening</div>
                        </div>
                    </div>
                </div>

                <div class="list-card">
                    <h3>Sovereign Tech Fund Grants</h3>
                    <p style="font-size: 0.875rem; color: #f87171; margin-bottom: 1rem;">‚ö†Ô∏è One-time government investments</p>
                    <div class="list-item">
                        <div class="info">
                            <h4>OpenJS Foundation</h4>
                            <p>Infrastructure & security policies</p>
                        </div>
                        <div class="value">
                            <div class="amount">‚Ç¨875K</div>
                            <div class="type">Concluded 2024</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>PyPI / Python</h4>
                            <p>Package registry security</p>
                        </div>
                        <div class="value">
                            <div class="amount">‚Ç¨1.06M</div>
                            <div class="type">Time-limited</div>
                        </div>
                    </div>
                    <div class="list-item">
                        <div class="info">
                            <h4>RubyGems & Bundler</h4>
                            <p>Registry improvements</p>
                        </div>
                        <div class="value">
                            <div class="amount">‚Ç¨668K</div>
                            <div class="type">Time-limited</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Volunteer Labor -->
            <div class="chart-container">
                <h3>The Volunteer Labor Subsidy</h3>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                    Open source has $8.8 trillion in economic value but only $4.2 billion in labor costs‚Äîbecause 60% of maintainers are unpaid volunteers
                </p>
                <div class="grid-2" style="margin-top: 1rem;">
                    <div>
                        <div class="chart-wrapper" style="height: 280px;">
                            <canvas id="volunteerChart"></canvas>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h4 style="color: #fff; margin-bottom: 1rem;">Maintainer Reality (Tidelift 2024)</h4>
                        <div style="display: grid; gap: 0.75rem;">
                            <div style="background: rgba(239,68,68,0.2); padding: 0.75rem; border-radius: 0.5rem; border-left: 3px solid #ef4444;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #f87171;">60%</div>
                                <div style="font-size: 0.875rem; color: #94a3b8;">Unpaid hobbyist maintainers</div>
                            </div>
                            <div style="background: rgba(251,191,36,0.2); padding: 0.75rem; border-radius: 0.5rem; border-left: 3px solid #fbbf24;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #fbbf24;">60%</div>
                                <div style="font-size: 0.875rem; color: #94a3b8;">Have quit or considered quitting</div>
                            </div>
                            <div style="background: rgba(139,92,246,0.2); padding: 0.75rem; border-radius: 0.5rem; border-left: 3px solid #8b5cf6;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #a78bfa;">7M / 11.8M</div>
                                <div style="font-size: 0.875rem; color: #94a3b8;">Projects with single maintainer</div>
                            </div>
                            <div style="background: rgba(96,165,250,0.2); padding: 0.75rem; border-radius: 0.5rem; border-left: 3px solid #60a5fa;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #60a5fa;">3x</div>
                                <div style="font-size: 0.875rem; color: #94a3b8;">More time on security vs. few years ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unfunded Security Work -->
            <div class="chart-container">
                <h3>Security Work NOT Getting Done</h3>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 1rem;">
                    Critical security capabilities that registries want but can't fund
                </p>
                <div class="data-table-scroll">
                    <table>
                        <thead>
                            <tr>
                                <th>Security Capability</th>
                                <th>Status</th>
                                <th>Barrier</th>
                                <th class="right">Est. Cost</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>24/7 Malware Detection (ML/AI)</td>
                                <td><span style="color: #ef4444;">‚ùå Not funded</span></td>
                                <td>Requires ML ops team, continuous monitoring</td>
                                <td class="right">$500K-2M/yr</td>
                            </tr>
                            <tr>
                                <td>24/7 Incident Response Team</td>
                                <td><span style="color: #ef4444;">‚ùå Not funded</span></td>
                                <td>No registry has documented on-call rotation</td>
                                <td class="right">$300K-500K/yr</td>
                            </tr>
                            <tr>
                                <td>Recurring Security Audits</td>
                                <td><span style="color: #fbbf24;">‚ö†Ô∏è One-time only</span></td>
                                <td>Grant-funded audits don't recur</td>
                                <td class="right">$50K-300K/audit</td>
                            </tr>
                            <tr>
                                <td>Full Build Provenance</td>
                                <td><span style="color: #fbbf24;">‚ö†Ô∏è Partial</span></td>
                                <td>Only ~5% adoption on PyPI</td>
                                <td class="right">$100K-500K</td>
                            </tr>
                            <tr>
                                <td>Reproducible Builds Verification</td>
                                <td><span style="color: #ef4444;">‚ùå Not funded</span></td>
                                <td>Requires rebuild infrastructure</td>
                                <td class="right">$200K+</td>
                            </tr>
                            <tr>
                                <td>Additional Security Staff</td>
                                <td><span style="color: #ef4444;">‚ùå Not funded</span></td>
                                <td>Can't compete with tech salaries</td>
                                <td class="right">$150K-250K/FTE</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Key Insight -->
            <div class="insight-box red">
                <h3>üö® The Precarious Reality</h3>
                <p>
                    Security work at PyPI, RubyGems, and crates.io is almost entirely funded by <strong class="yellow">Alpha-Omega grants</strong> and
                    <strong class="yellow">Sovereign Tech Fund</strong>‚Äînot from foundation operating budgets. These are <strong class="red">time-limited grants</strong>
                    that could end at any time. Meanwhile, <strong>60% of maintainers are unpaid volunteers</strong> contributing to an ecosystem worth
                    <strong class="green">$8.8 trillion</strong>. The gap between what's needed and what's funded grows wider every year.
                </p>
            </div>

            <!-- What happens when grants end -->
            <div class="cta-box" style="background: linear-gradient(135deg, #7f1d1d, #451a03); border-color: #dc2626;">
                <h3>What Happens When the Grants End?</h3>
                <div class="cta-grid">
                    <div>
                        <p>
                            Alpha-Omega and Sovereign Tech Fund grants have funded <strong style="color: #fbbf24;">Security Developer in Residence</strong> positions,
                            security audits, and Trusted Publishing implementations. But these are <strong style="color: #f87171;">not permanent funding</strong>.
                        </p>
                        <p style="margin-top: 1rem;">
                            When grants expire, registries face impossible choices: <strong style="color: #fff;">absorb costs they can't afford</strong>,
                            <strong style="color: #fff;">let security staff go</strong>, or <strong style="color: #fff;">stop security work entirely</strong>.
                        </p>
                    </div>
                    <div class="questions-box" style="background: rgba(0,0,0,0.4);">
                        <h4>Grant Dependency Risk</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                                <span style="position: absolute; left: 0; color: #ef4444;">‚óè</span>
                                PyPI Security Dev in Residence: <strong>Grant-funded since 2023</strong>
                            </li>
                            <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                                <span style="position: absolute; left: 0; color: #ef4444;">‚óè</span>
                                RubyGems Security Engineer: <strong>Grant-funded since 2024</strong>
                            </li>
                            <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                                <span style="position: absolute; left: 0; color: #ef4444;">‚óè</span>
                                STF grants to OpenJS: <strong>Already concluded (2024)</strong>
                            </li>
                            <li style="padding-left: 1.5rem; position: relative;">
                                <span style="position: absolute; left: 0; color: #fbbf24;">‚óè</span>
                                No registry has sustainable security funding model
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p>Data sources: PSF Annual Reports, Sonatype State of Software Supply Chain, PyPI Blog, npm Blog, Ruby Central, Rust Foundation</p>
            <p>Created January 2025 ‚Ä¢ Interactive Dashboard for Conference Presentation</p>
        </div>
    </footer>

    <script>
        // Tab switching
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Chart.js defaults
        Chart.defaults.color = '#9CA3AF';
        Chart.defaults.borderColor = '#374151';
        Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';

        // Package Growth Chart
        new Chart(document.getElementById('packageGrowthChart'), {
            type: 'line',
            data: {
                labels: ['2015', '2017', '2019', '2021', '2023', '2025'],
                datasets: [
                    { label: 'npm', data: [200000, 500000, 1000000, 1500000, 1800000, 2000000], borderColor: '#CB3837', backgroundColor: 'rgba(203, 56, 55, 0.1)', fill: true, tension: 0.3 },
                    { label: 'PyPI', data: [60000, 100000, 200000, 350000, 516000, 717000], borderColor: '#3572A5', backgroundColor: 'rgba(53, 114, 165, 0.1)', fill: true, tension: 0.3 },
                    { label: 'Maven', data: [150000, 200000, 350000, 500000, 600000, 658000], borderColor: '#C71A36', backgroundColor: 'rgba(199, 26, 54, 0.1)', fill: true, tension: 0.3 },
                    { label: 'Crates', data: [2000, 10000, 30000, 70000, 130000, 210000], borderColor: '#DEA584', backgroundColor: 'rgba(222, 165, 132, 0.1)', fill: true, tension: 0.3 },
                    { label: 'RubyGems', data: [100000, 130000, 155000, 170000, 180000, 190000], borderColor: '#CC342D', backgroundColor: 'rgba(204, 52, 45, 0.1)', fill: true, tension: 0.3 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { callback: v => (v / 1000000).toFixed(1) + 'M' }
                    }
                }
            }
        });

        // Downloads Chart
        new Chart(document.getElementById('downloadsChart'), {
            type: 'bar',
            data: {
                labels: ['npm', 'PyPI', 'Maven', 'RubyGems', 'Crates'],
                datasets: [{
                    label: 'Billions/month',
                    data: [184, 83.6, 116, 4.15, 15.2],
                    backgroundColor: ['#CB3837', '#3572A5', '#C71A36', '#CC342D', '#DEA584']
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } }
            }
        });

        // Bandwidth Chart
        new Chart(document.getElementById('bandwidthChart'), {
            type: 'bar',
            data: {
                labels: ['PyPI', 'Maven', 'npm', 'RubyGems', 'Crates'],
                datasets: [{
                    label: 'Petabytes/month',
                    data: [62.3, 50, 6, 5.66, 2.34],
                    backgroundColor: ['#3572A5', '#C71A36', '#CB3837', '#CC342D', '#DEA584']
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } }
            }
        });

        // Cost Chart
        new Chart(document.getElementById('costChart'), {
            type: 'bar',
            data: {
                labels: ['PyPI', 'RubyGems', 'Crates', 'npm', 'Maven'],
                datasets: [
                    { label: 'CDN (Fastly donated)', data: [1800, 500, 200, 0, 0], backgroundColor: '#3B82F6' },
                    { label: 'CDN (commercial)', data: [0, 0, 0, 150, 300], backgroundColor: '#6366F1' },
                    { label: 'Cloud Storage', data: [10, 20, 15, 100, 50], backgroundColor: '#10B981' },
                    { label: 'Compute', data: [7, 0, 5, 200, 100], backgroundColor: '#F59E0B' },
                    { label: 'Staff', data: [45, 50, 30, 200, 100], backgroundColor: '#EF4444' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'top' } },
                scales: {
                    x: { stacked: true },
                    y: { stacked: true, ticks: { callback: v => '$' + v + 'K' } }
                }
            }
        });

        // Foundation Budget Chart
        new Chart(document.getElementById('foundationBudgetChart'), {
            type: 'line',
            data: {
                labels: ['2020', '2021', '2022', '2023', '2024'],
                datasets: [
                    {
                        label: 'PSF Revenue',
                        data: [2.2, 2.3, 3.9, 4.4, 4.1],
                        borderColor: '#3572A5',
                        backgroundColor: 'rgba(53, 114, 165, 0.1)',
                        fill: true,
                        tension: 0.3,
                        pointRadius: 5
                    },
                    {
                        label: 'Ruby Central Revenue',
                        data: [0.3, 1.5, 2.6, 2.1, 3.1],
                        borderColor: '#CC342D',
                        backgroundColor: 'rgba(204, 52, 45, 0.1)',
                        fill: true,
                        tension: 0.3,
                        pointRadius: 5
                    },
                    {
                        label: 'Rust Foundation Budget',
                        data: [null, 1.0, 1.9, 1.9, 2.0],
                        borderColor: '#DEA584',
                        backgroundColor: 'rgba(222, 165, 132, 0.1)',
                        fill: true,
                        tension: 0.3,
                        pointRadius: 5
                    },
                    {
                        label: 'Est. True Infra Cost (PyPI)',
                        data: [15, 18, 20, 22, 25],
                        borderColor: '#94a3b8',
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.3,
                        pointRadius: 3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + context.parsed.y + 'M';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { callback: v => '$' + v + 'M' },
                        title: { display: true, text: 'Annual Budget (Millions USD)', color: '#9CA3AF' }
                    }
                }
            }
        });

        // Funding Gap Chart
        new Chart(document.getElementById('fundingGapChart'), {
            type: 'bar',
            data: {
                labels: ['PyPI', 'RubyGems', 'Crates.io'],
                datasets: [
                    {
                        label: 'Foundation Budget',
                        data: [4.4, 3.1, 1.9],
                        backgroundColor: '#3B82F6'
                    },
                    {
                        label: 'Fastly CDN Donation',
                        data: [21.6, 6, 2.4],
                        backgroundColor: '#10B981'
                    },
                    {
                        label: 'Other Infra (AWS, GCP)',
                        data: [0.2, 0.2, 0.2],
                        backgroundColor: '#F59E0B'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + context.parsed.y + 'M/year';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { callback: v => '$' + v + 'M' }
                    }
                }
            }
        });

        // Malware Chart
        new Chart(document.getElementById('malwareChart'), {
            type: 'line',
            data: {
                labels: ['2020', '2021', '2022', '2023', '2024', '2025'],
                datasets: [{
                    label: 'Total Malicious Packages',
                    data: [50000, 100000, 200000, 450000, 704000, 845000],
                    borderColor: '#EF4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.2)',
                    fill: true,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { ticks: { callback: v => (v / 1000) + 'K' } }
                }
            }
        });

        // Security Radar Chart
        new Chart(document.getElementById('securityRadarChart'), {
            type: 'radar',
            data: {
                labels: ['2FA/MFA', 'Trusted Publishing', 'Sigstore/Signing', 'Malware Scanning', 'SBOM Support'],
                datasets: [
                    { label: 'PyPI', data: [100, 85, 60, 90, 70], borderColor: '#3572A5', backgroundColor: 'rgba(53, 114, 165, 0.2)' },
                    { label: 'npm', data: [100, 70, 75, 85, 65], borderColor: '#CB3837', backgroundColor: 'rgba(203, 56, 55, 0.2)' },
                    { label: 'Maven', data: [40, 30, 100, 80, 75], borderColor: '#C71A36', backgroundColor: 'rgba(199, 26, 54, 0.2)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: '#374151' },
                        angleLines: { color: '#374151' }
                    }
                }
            }
        });

        // Trusted Publishing Chart
        new Chart(document.getElementById('trustedPublishingChart'), {
            type: 'line',
            data: {
                labels: ['Feb 2024', 'May 2024', 'Aug 2024', 'Nov 2024', 'Jan 2025'],
                datasets: [{
                    label: 'Projects',
                    data: [5000, 10000, 14000, 19000, 45000],
                    borderColor: '#10B981',
                    backgroundColor: 'rgba(16, 185, 129, 0.2)',
                    fill: true,
                    tension: 0.3,
                    pointRadius: 6,
                    pointBackgroundColor: '#10B981'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { ticks: { callback: v => (v / 1000) + 'K' } }
                }
            }
        });

        // OpenSSF Security Maturity Bar Chart
        new Chart(document.getElementById('openssfBarChart'), {
            type: 'bar',
            data: {
                labels: ['PyPI', 'npm', 'RubyGems', 'Crates.io', 'Maven'],
                datasets: [
                    {
                        label: 'Authentication',
                        data: [3, 3, 2, 2, 1],
                        backgroundColor: '#3572A5'
                    },
                    {
                        label: 'Authorization',
                        data: [2, 2, 2, 2, 2],
                        backgroundColor: '#CB3837'
                    },
                    {
                        label: 'General Capabilities',
                        data: [2, 2, 2, 2, 2],
                        backgroundColor: '#DEA584'
                    },
                    {
                        label: 'CLI Tooling',
                        data: [2, 2, 1, 2, 3],
                        backgroundColor: '#10B981'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 3,
                        ticks: {
                            stepSize: 1,
                            callback: function(value) {
                                const labels = ['Level 0', 'Level 1', 'Level 2', 'Level 3'];
                                return labels[value] || '';
                            }
                        },
                        title: { display: true, text: 'Maturity Level', color: '#9CA3AF' }
                    }
                }
            }
        });

        // Security Funding Sources Chart
        new Chart(document.getElementById('securityFundingChart'), {
            type: 'bar',
            data: {
                labels: ['PyPI', 'RubyGems', 'Crates.io', 'OpenJS'],
                datasets: [
                    {
                        label: 'Alpha-Omega Grants',
                        data: [1.3, 0.95, 0.91, 0.58],
                        backgroundColor: '#3B82F6'
                    },
                    {
                        label: 'Sovereign Tech Fund',
                        data: [1.06, 0.67, 0, 0.88],
                        backgroundColor: '#10B981'
                    },
                    {
                        label: 'Foundation Operating Budget (for security)',
                        data: [0.1, 0.1, 0.1, 0.1],
                        backgroundColor: '#6B7280'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + context.parsed.y + 'M';
                            }
                        }
                    }
                },
                scales: {
                    x: { stacked: true },
                    y: {
                        stacked: true,
                        ticks: { callback: v => '$' + v + 'M' },
                        title: { display: true, text: 'Security Funding (Millions USD)', color: '#9CA3AF' }
                    }
                }
            }
        });

        // Volunteer Labor Value Chart
        new Chart(document.getElementById('volunteerChart'), {
            type: 'doughnut',
            data: {
                labels: ['Unpaid (60%)', 'Semi-professional (24%)', 'Paid from OSS (12%)', 'Other (4%)'],
                datasets: [{
                    data: [60, 24, 12, 4],
                    backgroundColor: ['#EF4444', '#F59E0B', '#10B981', '#6B7280'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { padding: 15, usePointStyle: true }
                    }
                }
            }
        });
    </script>
</body>
</html>
